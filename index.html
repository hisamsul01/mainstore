<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Warehouse Manager</title>
  <style>
    :root {
      --primary: #4e73df; --info: #36b9cc; --ok: #1cc88a; --warn: #f6c23e; --danger: #e74a3b;
      --bg: #f8f9fa; --card: #fff; --ink: #333; --muted: #6c757d; --shadow: 0 4px 12px rgba(0,0,0,0.06);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Nunito', sans-serif; background: var(--bg); color: var(--ink); }
    a { text-decoration: none; color: inherit; }
    .topbar { position: sticky; top: 0; background: #fff; display: flex; align-items: center; justify-content: space-between; padding: 12px; box-shadow: var(--shadow); z-index: 20; }
    .brand { font-weight: bold; color: var(--primary); font-size: 18px; }
    .btn { padding: 6px 12px; border: none; border-radius: 6px; background: var(--primary); color: #fff; cursor: pointer; }
    .btn.ghost { background: transparent; border: 1px solid var(--primary); color: var(--primary); }
    .sidebar { position: fixed; top: 48px; bottom: 0; left: 0; width: 260px; background: #1f2a48; color: #e9ecff; padding: 12px; overflow-y: auto; transform: translateX(-100%); transition: transform .3s ease; z-index: 15; }
    .sidebar.show { transform: translateX(0); }
    .nav { list-style: none; }
    .nav li { margin-bottom: 4px; }
    .nav a { display: block; padding: 8px 10px; border-radius: 6px; }
    .nav a.active, .nav a:hover { background: #2a3870; }
    .submenu { list-style: none; padding-left:16px; display: none; }
    .nav li.open > .submenu { display: block; }
    .wrap { padding-top: 48px; }
    .content { padding: 12px; }
    .cards, .grid-2 { display: grid; gap: 8px; margin-bottom: 12px; }
    .card, .panel { background: var(--card); padding: 12px; border-radius: 8px; box-shadow: var(--shadow); }
    .field { margin-bottom: 8px; display: flex; flex-direction: column; }
    .field input, .field select { padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
    .table-wrap { overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; }
    thead th { background: #e9ecef; padding: 8px; text-align: left; position: sticky; top: 0; }
    tbody td { padding: 8px; border-top: 1px solid #e9ecef; }
    .tools { display:flex; gap:4px; flex-wrap:wrap; }
    .hidden { display: none; }
    /* Responsive */
    @media (min-width:600px) { .cards { grid-template-columns: repeat(2,1fr); } .grid-2 { grid-template-columns: 1fr 1fr; } }
    @media (min-width:900px) { .cards { grid-template-columns: repeat(3,1fr); } .wrap { margin-left: 260px; } .sidebar { transform: translateX(0); } }
  </style>
</head>
<body>
<header class="topbar">
  <div class="brand">Warehouse Manager</div>
  <button class="btn ghost" id="toggleSidebarBtn">☰</button>
</header>
<aside class="sidebar" id="sidebar">
  <ul class="nav" id="nav">
    <li><a href="#dashboard" class="active" data-view="dashboard">Dashboard</a></li>
    <li><a data-toggle="submenu">Operasional ▾</a>
      <ul class="submenu"><li><a href="#receipt" data-view="receipt">Penerimaan</a></li><li><a href="#transfer" data-view="transfer">Transfer</a></li></ul>
    </li>
    <li><a data-toggle="submenu">Master Data ▾</a>
      <ul class="submenu"><li><a href="#items" data-view="items">Barang</a></li><li><a href="#outlets" data-view="outlets">Outlet</a></li></ul>
    </li>
    <li><a href="#reports" data-view="reports">Laporan</a></li>
    <li><a href="#settings" data-view="settings">Pengaturan</a></li>
  </ul>
</aside>
<main class="wrap">
  <section class="content">
    <!-- Dashboard -->
    <section id="view-dashboard">...Kode Dashboard...</section>
    <!-- Receipt -->
    <section id="view-receipt" class="hidden">...Kode Penerimaan...</section>
    <!-- Transfer -->
    <section id="view-transfer" class="hidden">...Kode Transfer...</section>
    <!-- Master Barang -->
    <section id="view-items" class="hidden">
      <div class="panel"><h3>Master Barang</h3>
        <div class="field"><label>Kode</label><input id="itCode"></div>
        <div class="field"><label>Nama</label><input id="itName"></div>
        <button class="btn" onclick="addItem()">Tambah</button>
      </div>
      <div class="panel table-wrap">
        <table id="tblItems"><thead><tr><th>Kode</th><th>Nama</th><th>Aksi</th></tr></thead><tbody></tbody></table>
      </div>
    </section>
    <!-- Outlet, Reports, Settings -->
    <section id="view-outlets" class="hidden">...Kode Outlet...</section>
    <section id="view-reports" class="hidden">...Kode Laporan...</section>
    <section id="view-settings" class="hidden">...Kode Settings...</section>
  </section>
</main>
<script>
  document.getElementById('toggleSidebarBtn').onclick = ()=> document.getElementById('sidebar').classList.toggle('show');
  const views = ['dashboard','receipt','transfer','items','outlets','reports','settings'];
  function showView(name){
    views.forEach(v=>{
      document.getElementById('view-'+v).classList.toggle('hidden', v!==name);
      document.querySelectorAll(`[data-view="${v}"]`).forEach(a=>a.classList.toggle('active', v===name));
    });
  }
  document.getElementById('nav').addEventListener('click', e=>{
    const a = e.target.closest('a[data-view]');
    if(a){ e.preventDefault(); showView(a.dataset.view); }
  });
  document.querySelectorAll('[data-toggle="submenu"]').forEach(el=>el.onclick = ()=>el.parentElement.classList.toggle('open'));

  const DB = { key:'whm.v3', init(){ if(!localStorage.getItem(this.key)) localStorage.setItem(this.key, JSON.stringify({inventory:[],outlets:[],receipts:[],transfers:[],user:{}})); },
    load(){ return JSON.parse(localStorage.getItem(this.key)); },
    save(d){ localStorage.setItem(this.key, JSON.stringify(d)); }
  };
  DB.init();

  function renderItems(){
    const tbody = document.querySelector('#tblItems tbody');
    tbody.innerHTML = '';
    DB.load().inventory.forEach(item=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${item.code}</td><td>${item.name}</td>
        <td><button class="btn ghost" onclick="editItem('${item.code}')">Edit</button>
            <button class="btn" onclick="deleteItem('${item.code}')">Delete</button></td>`;
      tbody.appendChild(tr);
    });
  }
  function addItem(){
    const code = document.getElementById('itCode').value.trim(), name = document.getElementById('itName').value.trim();
    if(!code||!name){ alert('Lengkapi data.'); return; }
    const db = DB.load();
    if(db.inventory.find(i=>i.code===code)){ alert('Kode sudah ada.'); return; }
    db.inventory.push({code,name,qty:0}); DB.save(db);
    document.getElementById('itCode').value = ''; document.getElementById('itName').value = '';
    renderItems();
  }
  function editItem(code){
    const db = DB.load(), item = db.inventory.find(x=>x.code===code);
    const newName = prompt('Nama baru:', item.name);
    if(newName!=null){ item.name=newName; DB.save(db); renderItems(); }
  }
  function deleteItem(code){
    if(!confirm('Hapus barang?'))return;
    const db=DB.load(); db.inventory= db.inventory.filter(x=>x.code!==code); DB.save(db); renderItems();
  }
  window.onload = ()=>{ renderItems(); };
</script>
</body>
</html>